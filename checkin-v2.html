function bind_attachment_download_status(msgattr, eStatus) {
    const inst = msgattr._fileMsgInstance;
    if (!inst || !msgattr.download_task) return;

    const task = msgattr.download_task;

    const update = () => {
        if (!msgattr.download_task) return;

        // 直接复用 FileMsg 的状态文本
        eStatus.textContent =
            inst.panel.wrapper.format_text_for_msgview(
                task.backtask_status_text.textContent
            );
    };

    // 初次刷新
    update();

    // 复用任务生命周期
    task.onwaiting = update;
    task.onprogress = update;
    task.onfinished = update;
    task.onfailed = update;
}
